<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Cat - 20 Golden Stages</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; touch-action: none; }
        #gameUI { position: absolute; top: 10px; width: 100%; text-align: center; color: white; z-index: 10; pointer-events: none; }
        .bar { width: 70%; height: 15px; background: #333; margin: 10px auto; border-radius: 10px; border: 1px solid #fff; overflow: hidden; }
        #fill { width: 0%; height: 100%; background: #2ecc71; transition: 0.3s; }
        #menu { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; color: #fff; z-index: 100; text-align: center; }
        button { padding: 15px 50px; font-size: 25px; cursor: pointer; border-radius: 40px; background: #e67e22; color: white; border: none; font-weight: bold; box-shadow: 0 5px 0 #d35400; }
        button:active { transform: translateY(3px); box-shadow: none; }
    </style>
</head>
<body>

<div id="gameUI">
    <div id="lvlTitle" style="font-size: 24px; color: #f1c40f; margin-bottom: 5px;">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨</div>
    <div class="bar"><div id="fill"></div></div>
    <div style="font-size: 20px;">ğŸŸ <span id="sc">0</span> | ğŸ <span id="ds">1000</span>m</div>
</div>

<div id="menu">
    <h1 id="msg" style="font-size: 35px;">Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù‚Ø·Ø© Ø±Ù‡Ù ğŸ¾</h1>
    <p style="font-size: 20px; color: #00ffcc;">Ø§Ù„Ø°Ø¦Ø¨ ÙŠØ·Ø§Ø±Ø¯Ùƒ.. Ø§Ù‚ÙØ²ÙŠ Ù„Ù„Ù†Ø¬Ø§Ø©!</p>
    <button onclick="startGame()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© ğŸš€</button>
</div>

<canvas id="c"></canvas>

<script>
    const canvas = document.getElementById('c');
    const ctx = canvas.getContext('2d');

    // Ù…ØµÙÙˆÙØ© Ø§Ù„Ù€ 20 Ù…Ø±Ø­Ù„Ø© ÙƒØ§Ù…Ù„Ø©
    const stages = [
        {n:"ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨", m:"ğŸº", c:"#f1c40f", s:6}, {n:"Ù…Ù‚Ø¨Ø±Ø© Ø§Ù„Ø£Ø´Ø¨Ø§Ø­", m:"ğŸ‘»", c:"#9b59b6", s:7},
        {n:"Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù†Ø³ÙˆØ±", m:"ğŸ¦…", c:"#3498db", s:8}, {n:"ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø£ÙØ§Ø¹ÙŠ", m:"ğŸ", c:"#e67e22", s:9},
        {n:"Ù†Ù‡Ø± Ø§Ù„ØªÙ…Ø§Ø³ÙŠØ­", m:"ğŸŠ", c:"#1abc9c", s:10}, {n:"Ø¹Ø±ÙŠÙ† Ø§Ù„Ø£Ø³Ø¯", m:"ğŸ¦", c:"#e74c3c", s:11},
        {n:"ÙƒÙ‡Ù Ø§Ù„ØªÙ†ÙŠÙ†", m:"ğŸ‰", c:"#ff4757", s:12}, {n:"Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¬Ù„ÙŠØ¯", m:"ğŸ»", c:"#70a1ff", s:13},
        {n:"Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø¨Ø¹ÙŠØ¯", m:"ğŸ‘½", c:"#2ed573", s:14}, {n:"Ø¨Ø±Ø¬ Ø§Ù„Ø®ÙØ§ÙÙŠØ´", m:"ğŸ¦‡", c:"#57606f", s:15},
        {n:"ØºØ§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ±", m:"ğŸ¯", c:"#ffa502", s:16}, {n:"Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØºÙˆØ±ÙŠÙ„Ø§", m:"ğŸ¦", c:"#2f3542", s:17},
        {n:"Ù‚Ù„Ø¹Ø© Ø§Ù„Ø¹Ø¸Ø§Ù…", m:"ğŸ’€", c:"#ced6e0", s:18}, {n:"Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ù‚Ø±Ø´", m:"ğŸ¦ˆ", c:"#1e90ff", s:19},
        {n:"ÙƒÙ‡Ù Ø§Ù„Ø¹Ù†Ø§ÙƒØ¨", m:"ğŸ•·ï¸", c:"#ff6b81", s:20}, {n:"Ù…Ø³ØªÙ†Ù‚Ø¹ Ø§Ù„ÙˆØ­ÙˆØ´", m:"ğŸ§Ÿ", c:"#a4b0be", s:21},
        {n:"Ø±Ù…Ø§Ù„ Ø§Ù„ØµØ­Ø±Ø§Ø¡", m:"ğŸ«", c:"#eccc68", s:22}, {n:"ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø³Ø­Ø±", m:"ğŸ§™", c:"#a29bfe", s:23},
        {n:"Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø¢Ù„ÙŠÙŠÙ†", m:"ğŸ¤–", c:"#dfe4ea", s:24}, {n:"Ø§Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©", m:"ğŸ‘¹", c:"#ff4757", s:26}
    ];

    let currentLvl = 0, score = 0, distance = 1000, active = false, started = false;
    let cat = {x: 100, y: 0, v: 0}, wolf = {x: -120, y: 0}, obstacles = [], fishes = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startGame() {
        document.getElementById('menu').style.display = 'none';
        distance = 1000; cat.y = canvas.height / 2; cat.v = 0; wolf.x = -120;
        obstacles = []; fishes = []; active = true; started = false;
        document.getElementById('lvlTitle').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${currentLvl + 1}: ${stages[currentLvl].n}`;
    }

    function gameOver(win) {
        active = false;
        document.getElementById('menu').style.display = 'flex';
        if(win) {
            document.getElementById('msg').innerText = "Ø±Ø§Ø¦Ø¹! ØªÙ… Ø§Ø¬ØªÙŠØ§Ø² Ø§Ù„Ù…Ø±Ø­Ù„Ø©! ğŸ‰";
        } else {
            document.getElementById('msg').innerText = "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ Ø§Ù„ÙˆØ­Ø´! ğŸ’¥";
        }
    }

    function update() {
        if (!active || !started) return;
        const s = stages[currentLvl];
        
        cat.v += 0.5; cat.y += cat.v; // Ø¬Ø§Ø°Ø¨ÙŠØ©
        distance -= s.s / 10;
        
        // Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„ÙˆØ­Ø´ Ù…Ù† Ø§Ù„Ø®Ù„Ù
        wolf.y += (cat.y - wolf.y) * 0.07;
        wolf.x = Math.min(cat.x - 130, wolf.x + 0.4);

        if (distance <= 0) {
            active = false; currentLvl++;
            if(currentLvl >= 20) { currentLvl = 0; document.getElementById('msg').innerText = "ğŸ† Ø¨Ø·Ù„Ø©! Ø®ØªÙ…ØªÙ Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ†"; }
            gameOver(true);
        }

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ÙˆØ§Ù„Ø³Ù…Ùƒ
        if (Math.random() < 0.02) {
            let gap = Math.random() * (canvas.height - 300) + 100;
            obstacles.push({x: canvas.width, y: gap, h: 280});
            fishes.push({x: canvas.width + 50, y: gap + 140});
        }

        obstacles.forEach((o, i) => {
            o.x -= s.s;
            if (cat.x + 30 > o.x && cat.x < o.x + 50 && (cat.y < o.y || cat.y + 40 > o.y + o.h)) gameOver(false);
            if (o.x < -100) obstacles.splice(i, 1);
        });

        fishes.forEach((f, i) => {
            f.x -= s.s;
            if (Math.hypot(cat.x - f.x, cat.y - f.y) < 50) { score += 100; fishes.splice(i, 1); }
        });

        if (cat.y > canvas.height || cat.y < -50 || cat.x < wolf.x + 70) gameOver(false);

        document.getElementById('fill').style.width = (1 - distance / 1000) * 100 + "%";
        document.getElementById('ds').innerText = Math.max(0, Math.floor(distance));
        document.getElementById('sc').innerText = score;
    }

    function draw() {
        const s = stages[currentLvl];
        ctx.fillStyle = "#000"; ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
        ctx.fillStyle = s.c;
        obstacles.forEach(o => {
            ctx.fillRect(o.x, 0, 50, o.y);
            ctx.fillRect(o.x, o.y + o.h, 50, canvas.height);
        });

        // Ø§Ù„Ø³Ù…Ùƒ
        ctx.font = "35px Arial";
        fishes.forEach(f => ctx.fillText("ğŸ ", f.x, f.y));

        // Ø§Ù„ÙˆØ­Ø´ (ÙŠØ·Ø§Ø±Ø¯ Ù…Ù† Ø§Ù„Ø®Ù„Ù)
        ctx.font = "70px Arial";
        ctx.save();
        ctx.translate(wolf.x + 80, wolf.y + 60);
        ctx.scale(-1, 1); 
        ctx.fillText(s.m, 0, 0);
        ctx.restore();

        // Ø§Ù„Ù‚Ø·Ø© Ø±Ù‡Ù
        ctx.font = "55px Arial";
        ctx.fillText("ğŸ±", cat.x, cat.y + 50);

        update();
        requestAnimationFrame(draw);
    }

    const jump = () => { if(active) { started = true; cat.v = -9; } };
    window.addEventListener('mousedown', jump);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); jump(); }, {passive: false});

    draw();
</script>
</body>
</html>