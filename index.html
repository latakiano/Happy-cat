<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ© - 20 Ù…Ø±Ø­Ù„Ø©</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; touch-action: none; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; z-index: 10; pointer-events: none; }
        .bar { width: 70%; height: 12px; background: #333; margin: 10px auto; border-radius: 5px; border: 1px solid #fff; }
        #fill { width: 0%; height: 100%; background: #0f0; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; }
        button { padding: 15px 40px; font-size: 22px; cursor: pointer; border-radius: 30px; background: #e74c3c; color: white; border: none; font-weight: bold; }
    </style>
</head>
<body>

<div id="ui">
    <div id="lvlText" style="font-size: 24px;">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</div>
    <div class="bar"><div id="fill"></div></div>
    <div style="font-size: 18px;">ğŸŸ <span id="score">0</span> | ğŸ <span id="dist">1000</span>m</div>
</div>

<div id="overlay">
    <h1 id="msg">Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù€ 20 Ù…Ø±Ø­Ù„Ø© ğŸ¾</h1>
    <button onclick="startStage()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„Ù‡Ø±ÙˆØ¨ ğŸš€</button>
</div>

<canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    
    // ØªØ¹Ø±ÙŠÙ 20 Ù…Ø±Ø­Ù„Ø© ÙƒØ§Ù…Ù„Ø© (Ø§Ø³Ù…ØŒ ÙˆØ­Ø´ØŒ Ù„ÙˆÙ†ØŒ Ø³Ø±Ø¹Ø©)
    const stages = [
        { n: "ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨", m: "ğŸº", col: "#f1c40f", s: 6 },
        { n: "Ù…Ù‚Ø¨Ø±Ø© Ø§Ù„Ø£Ø´Ø¨Ø§Ø­", m: "ğŸ‘»", col: "#9b59b6", s: 7 },
        { n: "Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù†Ø³ÙˆØ±", m: "ğŸ¦…", col: "#3498db", s: 8 },
        { n: "ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø£ÙØ§Ø¹ÙŠ", m: "ğŸ", col: "#e67e22", s: 9 },
        { n: "Ù†Ù‡Ø± Ø§Ù„ØªÙ…Ø§Ø³ÙŠØ­", m: "ğŸŠ", col: "#1abc9c", s: 10 },
        { n: "Ø¹Ø±ÙŠÙ† Ø§Ù„Ø£Ø³Ø¯", m: "ğŸ¦", col: "#e74c3c", s: 11 },
        { n: "ÙƒÙ‡Ù Ø§Ù„ØªÙ†ÙŠÙ†", m: "ğŸ‰", col: "#ff0000", s: 12 },
        { n: "Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¬Ù„ÙŠØ¯", m: "ğŸ»", col: "#00d4ff", s: 13 },
        { n: "Ø§Ù„ÙØ¶Ø§Ø¡", m: "ğŸ‘½", col: "#00ffcc", s: 14 },
        { n: "Ø¨Ø±Ø¬ Ø§Ù„Ø®ÙØ§Ø´", m: "ğŸ¦‡", col: "#666", s: 15 },
        { n: "Ø£Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ±", m: "ğŸ¯", col: "#ff9900", s: 16 },
        { n: "Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØºÙˆØ±ÙŠÙ„Ø§", m: "ğŸ¦", col: "#2ecc71", s: 17 },
        { n: "Ù‚ØµØ± Ø§Ù„Ù‡ÙŠØ§ÙƒÙ„", m: "ğŸ’€", col: "#ecf0f1", s: 18 },
        { n: "Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø±", m: "ğŸ¦ˆ", col: "#2980b9", s: 19 },
        { n: "Ø¹Ø´ Ø§Ù„Ø¹Ù†Ø§ÙƒØ¨", m: "ğŸ•·ï¸", col: "#c0392b", s: 20 },
        { n: "Ø§Ù„Ù…Ø³ØªÙ†Ù‚Ø¹", m: "ğŸ§Ÿ", col: "#d4ac0d", s: 21 },
        { n: "Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§Øª", m: "âš°ï¸", col: "#f39c12", s: 22 },
        { n: "Ø¹Ø§Ù„Ù… Ø§Ù„Ø³Ø­Ø±", m: "ğŸ§™", col: "#8e44ad", s: 23 },
        { n: "Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª", m: "ğŸ¤–", col: "#bdc3c7", s: 24 },
        { n: "Ø§Ù„Ø²Ø¹ÙŠÙ… Ø§Ù„Ø£Ø®ÙŠØ±", m: "ğŸ‘¹", col: "#ffffff", s: 26 }
    ];

    let cur = 0, score = 0, dist = 1000, active = false, started = false;
    let p = { x: 100, y: 0, v: 0, s: 50 };
    let m = { x: -100, y: 0, s: 70 };
    let obs = [], fish = [];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startStage() {
        document.getElementById('overlay').style.display = 'none';
        dist = 1000; p.y = canvas.height/2; p.v = 0; m.x = -100; m.y = canvas.height/2;
        obs = []; fish = [];
        document.getElementById('lvlText').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${cur+1}: ${stages[cur].n}`;
        active = true; started = false;
    }

    function die() {
        active = false;
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('msg').innerText = "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ " + stages[cur].m;
    }

    function update() {
        if (!active || !started) return;
        const s = stages[cur];
        
        p.v += 0.5; p.y += p.v; // Ø¬Ø§Ø°Ø¨ÙŠØ©
        dist -= s.s / 10;

        // Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„ÙˆØ­Ø´
        m.y += (p.y - m.y) * 0.06;
        m.x = Math.min(p.x - 120, m.x + 0.4);

        if (dist <= 0) {
            active = false; cur++;
            if (cur >= 20) { document.getElementById('msg').innerText = "ğŸ† Ø®ØªÙ…Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ†"; cur = 0; }
            else { document.getElementById('msg').innerText = "ğŸ  ÙˆØµÙ„Øª Ø¨Ø£Ù…Ø§Ù†!"; }
            document.getElementById('overlay').style.display = 'flex';
        }

        if (frame % 90 === 0) {
            let gap = Math.random() * (canvas.height - 300) + 100;
            obs.push({ x: canvas.width, y: gap, g: 280 });
            fish.push({ x: canvas.width + 50, y: gap + 140 });
        }

        obs.forEach((o, i) => {
            o.x -= s.s;
            if (p.x+30 > o.x && p.x < o.x+50 && (p.y < o.y || p.y+40 > o.y+o.g)) die();
            if (o.x < -100) obs.splice(i, 1);
        });

        fish.forEach((f, i) => {
            f.x -= s.s;
            if (Math.hypot(p.x-f.x, p.y-f.y) < 40) { score += 100; fish.splice(i, 1); }
        });

        if (p.y > canvas.height || p.y < -50 || p.x < m.x + 60) die();

        document.getElementById('fill').style.width = (1 - dist/1000)*100 + "%";
        document.getElementById('dist').innerText = Math.max(0, Math.floor(dist));
        document.getElementById('score').innerText = score;
    }

    let frame = 0;
    function draw() {
        const s = stages[cur];
        ctx.fillStyle = "#000";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Ø±Ø³Ù… Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
        ctx.fillStyle = s.col;
        obs.forEach(o => {
            ctx.fillRect(o.x, 0, 50, o.y);
            ctx.fillRect(o.x, o.y + o.g, 50, canvas.height);
        });

        // Ø±Ø³Ù… Ø§Ù„Ø³Ù…Ùƒ
        ctx.font = "30px Arial";
        fish.forEach(f => ctx.fillText("ğŸ ", f.x, f.y));

        // Ø±Ø³Ù… Ø§Ù„ÙˆØ­Ø´ ÙˆØ§Ù„Ù…Ø·Ø§Ø±Ø¯Ø©
        ctx.font = "60px Arial";
        ctx.fillText(s.m, m.x, m.y + 50);

        // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø©
        ctx.font = "50px Arial";
        ctx.fillText("ğŸ±", p.x, p.y + 40);

        frame++;
        update();
        requestAnimationFrame(draw);
    }

    const jump = () => { if(active) { started = true; p.v = -9; } };
    window.addEventListener('mousedown', jump);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); jump(); }, {passive: false});

    draw();
</script>
</body>
</html>