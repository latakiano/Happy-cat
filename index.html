<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Cat Gold</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; touch-action: none; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; z-index: 100; pointer-events: none; }
        .progress-bar { width: 80%; height: 12px; background: #333; margin: 5px auto; border-radius: 10px; border: 1px solid #fff; }
        #fill { width: 0%; height: 100%; background: #00ffcc; border-radius: 10px; }
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); display: flex; flex-direction: column; 
            justify-content: center; align-items: center; color: white; z-index: 1000; 
        }
        .btn { 
            padding: 15px 40px; font-size: 24px; cursor: pointer; border-radius: 50px; 
            background: #e67e22; color: white; border: none; font-weight: bold;
            box-shadow: 0 5px 0 #d35400; margin-top: 20px;
        }
        .score { color:#f1c40f; font-size: 20px; font-weight: bold; }
    </style>
</head>
<body>

<div id="ui">
    <div id="lvlName" style="font-size: 22px; margin-bottom: 5px;">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</div>
    <div class="progress-bar"><div id="fill"></div></div>
    <div class="score">ğŸŸ Ø§Ù„Ø³Ù…Ùƒ: <span id="fishCount">0</span> | ğŸ Ø§Ù„Ù…Ø³Ø§ÙØ©: <span id="distance">1000</span></div>
</div>

<div id="overlay">
    <h1 id="msg">Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù‚Ø·Ø© Ù‡Ù…Ù„Ø§ÙŠØ§ ğŸ¾</h1>
    <p>Ø§Ø¶ØºØ· Ù„Ù„Ù‚ÙØ² ÙˆØ§Ù„Ù‡Ø±ÙˆØ¨ Ù…Ù† Ø§Ù„ÙˆØ­Ø´!</p>
    <button class="btn" onclick="startGame()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const overlay = document.getElementById('overlay');
    const fill = document.getElementById('fill');
    
    let gameActive = false, started = false;
    let fish = 0, level = 0, dist = 1000;
    let cat = { x: 80, y: 0, v: 0, w: 70, h: 50 };
    let monster = { x: -200, y: 0 };
    let pipes = [], food = [];

    const barrierColors = ["#f1c40f", "#3498db", "#2ecc71", "#111111", "#8b4513", "#800000", "#4b0082", "#2f4f4f", "#ff4500", "#556b2f"];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function drawCat(x, y) {
        ctx.save();
        // Ø§Ù„Ø¬Ø³Ù… (Ø£Ø¨ÙŠØ¶ ÙƒØ±ÙŠÙ…ÙŠ Ù„Ù„Ù‡Ù…Ù„Ø§ÙŠØ§)
        ctx.fillStyle = "#FDF5E6";
        ctx.beginPath(); ctx.ellipse(x + 30, y + 30, 30, 20, 0, 0, Math.PI * 2); ctx.fill();
        // Ø§Ù„ÙˆØ¬Ù‡ ÙˆØ§Ù„Ø£Ø°Ù†ÙŠÙ† (Ø¨Ù†ÙŠ ØºØ§Ù…Ù‚ - Ø³ÙŠØ§Ù„ Ø¨ÙˆÙŠÙ†Øª)
        ctx.fillStyle = "#3E2723";
        ctx.beginPath(); ctx.arc(x + 50, y + 20, 15, 0, Math.PI * 2); ctx.fill(); // Ø§Ù„Ø±Ø£Ø³
        ctx.beginPath(); ctx.moveTo(x+40, y+10); ctx.lineTo(x+45, y); ctx.lineTo(x+50, y+10); ctx.fill(); // Ø£Ø°Ù†
        // Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡ Ø§Ù„Ù…Ù…ÙŠØ²Ø©
        ctx.fillStyle = "#00BFFF";
        ctx.beginPath(); ctx.arc(x + 55, y + 18, 3, 0, Math.PI * 2); ctx.fill();
        // Ø§Ù„Ø°ÙŠÙ„ Ø§Ù„ÙƒØ«ÙŠÙ
        ctx.strokeStyle = "#3E2723"; ctx.lineWidth = 10; ctx.lineCap = "round";
        ctx.beginPath(); ctx.moveTo(x+10, y+35); ctx.quadraticCurveTo(x-10, y+10, x+5, y+5); ctx.stroke();
        ctx.restore();
    }

    function drawMonster(x, y) {
        ctx.fillStyle = "#1a1a1a";
        ctx.beginPath(); ctx.moveTo(x, y); ctx.lineTo(x+140, y+60); ctx.lineTo(x, y+120); ctx.closePath(); ctx.fill();
        ctx.fillStyle = "red"; ctx.beginPath(); ctx.arc(x+90, y+45, 6, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(x+90, y+75, 6, 0, Math.PI*2); ctx.fill();
    }

    function drawFish(x, y) {
        ctx.fillStyle = "#FF8C00";
        ctx.beginPath(); ctx.ellipse(x, y, 18, 10, 0, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.moveTo(x-12, y); ctx.lineTo(x-25, y-12); ctx.lineTo(x-25, y+12); ctx.closePath(); ctx.fill();
    }

    function startGame() {
        overlay.style.display = 'none';
        cat.y = canvas.height / 2;
        cat.v = 0;
        monster.x = -200;
        pipes = []; food = [];
        dist = 1000;
        gameActive = true;
        started = false;
        document.getElementById('lvlName').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${level + 1}`;
    }

    function gameOver(win = false) {
        gameActive = false;
        document.getElementById('msg').innerText = win ? "Ø£Ø­Ø³Ù†Øª! Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ğŸ†" : "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ Ø§Ù„ÙˆØ­Ø´! ğŸ™€";
        if (win) level = (level + 1) % 20;
        overlay.style.display = 'flex';
    }

    function update() {
        if (!gameActive) return;
        if (started) {
            cat.v += 0.55;
            cat.y += cat.v;
            dist -= 0.8;
            monster.y += (cat.y - monster.y) * 0.06;
            monster.x = Math.min(cat.x - 140, monster.x + 0.5);

            if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - 350) {
                let gapPos = Math.random() * (canvas.height - 350) + 100;
                pipes.push({ x: canvas.width, y: gapPos, g: 300 });
                food.push({ x: canvas.width + 100, y: gapPos + 150 });
            }

            pipes.forEach((p, i) => {
                p.x -= 6;
                if (cat.x + 50 > p.x && cat.x < p.x + 70 && (cat.y < p.y || cat.y + 40 > p.y + p.g)) gameOver();
                if (p.x < -100) pipes.splice(i, 1);
            });

            food.forEach((f, i) => {
                f.x -= 6;
                if (Math.hypot(cat.x + 30 - f.x, cat.y + 30 - f.y) < 50) {
                    fish += 100;
                    food.splice(i, 1);
                    document.getElementById('fishCount').innerText = fish;
                }
            });

            if (cat.y > canvas.height || cat.y < -100 || cat.x < monster.x + 110) gameOver();
            if (dist <= 0) gameOver(true);

            fill.style.width = (1 - dist / 1000) * 100 + "%";
            document.getElementById('distance').innerText = Math.max(0, Math.floor(dist));
        }
    }

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Ø±Ø³Ù… Ø§Ù„Ø­ÙˆØ§Ø¬Ø²
        pipes.forEach(p => {
            ctx.fillStyle = barrierColors[level % 10];
            ctx.fillRect(p.x, 0, 70, p.y);
            ctx.fillRect(p.x, p.y + p.g, 70, canvas.height);
        });

        food.forEach(f => drawFish(f.x, f.y));
        drawMonster(monster.x, monster.y);
        drawCat(cat.x, cat.y);

        update();
        requestAnimationFrame(render);
    }

    const input = () => { if (gameActive) { started = true; cat.v = -9.5; } };
    window.addEventListener('mousedown', input);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); input(); }, { passive: false });

    render();
</script>
</body>
</html>