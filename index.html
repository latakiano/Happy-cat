<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Dream - Island Project</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Tahoma', sans-serif; touch-action: none; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: white; z-index: 100; pointer-events: none; }
        .bar-bg { width: 80%; height: 12px; background: #333; margin: 5px auto; border-radius: 10px; border: 1px solid #fff; }
        #bar-fill { width: 0%; height: 100%; background: #00ffcc; border-radius: 10px; }
        #overlay { 
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            color: white; z-index: 1000; text-align: center;
        }
        .start-btn { 
            padding: 20px 60px; font-size: 28px; cursor: pointer; border-radius: 50px; 
            background: #e67e22; color: white; border: none; font-weight: bold;
            box-shadow: 0 6px 0 #d35400; margin-top: 20px; transition: 0.1s;
        }
        .start-btn:active { transform: translateY(4px); box-shadow: none; }
        .score-info { color:#f1c40f; font-size: 22px; font-weight: bold; text-shadow: 2px 2px 4px #000; }
    </style>
</head>
<body>

<div id="ui">
    <div id="lvlName" style="font-size: 26px; color: #3498db; font-weight: bold;">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1</div>
    <div class="bar-bg"><div id="bar-fill"></div></div>
    <div class="score-info">ğŸŸ Ø§Ù„Ø³Ù…Ùƒ: <span id="fCount">0</span> | ğŸš© Ø§Ù„Ù‡Ø¯Ù: <span id="dCount">1000</span>m</div>
</div>

<div id="overlay">
    <h1 id="msg" style="font-size: 3em; color: #f1c40f;">Ù…Ù‡Ù…Ø© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¬Ø²ÙŠØ±Ø© ğŸï¸</h1>
    <p style="font-size: 1.4em; padding: 0 20px;">Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‚Ø·Ø© Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§ Ø¹Ù„Ù‰ Ø¬Ù…Ø¹ Ø§Ù„Ø«Ø±ÙˆØ© Ù„Ù„Ù…Ø¶Ø·Ù‡Ø¯ÙŠÙ†!</p>
    <button class="start-btn" onclick="start()">Ø§Ù†Ø·Ù„Ø§Ù‚ ğŸš€</button>
</div>

<canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const overlay = document.getElementById('overlay');
    
    let active = false, started = false;
    let fishTotal = 0, level = 0, dist = 1000;
    let cat = { x: 100, y: 0, v: 0 };
    let monster = { x: -250, y: 0 };
    let barriers = [], snacks = [];

    const colors = ["#f1c40f", "#3498db", "#2ecc71", "#111111", "#8b4513", "#800000", "#4b0082", "#2f4f4f", "#ff4500", "#556b2f"];

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Ø±Ø³Ù… Ø§Ù„Ù‚Ø·Ø© Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ø£Ø¨ÙŠØ¶ ÙƒØ±ÙŠÙ…ÙŠ + ÙˆØ¬Ù‡ Ø¯Ø§ÙƒÙ† + Ø¹ÙŠÙˆÙ† Ø²Ø±Ù‚Ø§Ø¡)
    function drawHimalayan(x, y) {
        ctx.save();
        ctx.translate(x, y);
        // Ø§Ù„Ø¬Ø³Ù… Ø§Ù„ÙƒØ«ÙŠÙ
        ctx.fillStyle = "#FDF5E6";
        ctx.beginPath(); ctx.ellipse(40, 40, 35, 25, 0, 0, Math.PI*2); ctx.fill();
        // Ø§Ù„Ø±Ø£Ø³
        ctx.beginPath(); ctx.arc(65, 25, 20, 0, Math.PI*2); ctx.fill();
        // Ø§Ù„Ù‚Ù†Ø§Ø¹ Ø§Ù„Ø¨Ù†ÙŠ (Ø§Ù„Ù‡Ù…Ù„Ø§ÙŠØ§)
        ctx.fillStyle = "#3E2723";
        ctx.beginPath(); ctx.arc(72, 25, 12, 0, Math.PI*2); ctx.fill();
        // Ø§Ù„Ø¹ÙŠÙˆÙ† Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡ Ø§Ù„Ù…ØªÙˆÙ‡Ø¬Ø©
        ctx.fillStyle = "#00BFFF";
        ctx.beginPath(); ctx.arc(78, 22, 4, 0, Math.PI*2); ctx.fill();
        // Ø§Ù„Ø£Ø°Ù†ÙŠÙ†
        ctx.fillStyle = "#3E2723";
        ctx.beginPath(); ctx.moveTo(55, 12); ctx.lineTo(60, 0); ctx.lineTo(68, 12); ctx.fill();
        // Ø§Ù„Ø°ÙŠÙ„ Ø§Ù„Ø·ÙˆÙŠÙ„ Ø§Ù„ÙØ§Ø®Ø±
        ctx.strokeStyle = "#3E2723"; ctx.lineWidth = 12; ctx.lineCap = "round";
        ctx.beginPath(); ctx.moveTo(10, 40); ctx.quadraticCurveTo(-15, 10, 15, 5); ctx.stroke();
        ctx.restore();
    }

    // Ø±Ø³Ù… Ø§Ù„ÙˆØ­Ø´ Ø§Ù„Ù…Ù‡ÙŠØ¨
    function drawBoss(x, y) {
        ctx.fillStyle = "#111";
        ctx.beginPath(); ctx.moveTo(x, y); ctx.lineTo(x+150, y+70); ctx.lineTo(x, y+140); ctx.closePath(); ctx.fill();
        ctx.fillStyle = "#ff0000"; ctx.shadowBlur = 15; ctx.shadowColor = "red";
        ctx.beginPath(); ctx.arc(x+100, y+55, 7, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.arc(x+100, y+85, 7, 0, Math.PI*2); ctx.fill();
        ctx.shadowBlur = 0;
    }

    // Ø±Ø³Ù… Ø§Ù„Ø³Ù…ÙƒØ© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©
    function drawFish(x, y) {
        ctx.fillStyle = "#FFD700"; ctx.beginPath(); ctx.ellipse(x, y, 22, 13, 0, 0, Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.moveTo(x-15, y); ctx.lineTo(x-35, y-15); ctx.lineTo(x-35, y+15); ctx.closePath(); ctx.fill();
        ctx.fillStyle = "black"; ctx.beginPath(); ctx.arc(x+12, y-4, 3, 0, Math.PI*2); ctx.fill();
    }

    function start() {
        overlay.style.display = 'none';
        cat.y = canvas.height / 2; cat.v = 0;
        monster.x = -250; monster.y = cat.y;
        barriers = []; snacks = [];
        dist = 1000; active = true; started = false;
        document.getElementById('lvlName').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${level + 1}`;
    }

    function fail() {
        active = false;
        document.getElementById('msg').innerText = "Ø§Ù„ÙˆØ­Ø´ Ø¹Ø±Ù‚Ù„ Ø­Ù„Ù…Ù†Ø§! ğŸ™€";
        overlay.style.display = 'flex';
    }

    function win() {
        active = false;
        level = (level + 1) % 20;
        document.getElementById('msg').innerText = "Ø®Ø·ÙˆØ© Ø£Ø®Ø±Ù‰ Ù†Ø­Ùˆ Ø§Ù„Ø¬Ø²ÙŠØ±Ø©! ğŸ†";
        overlay.style.display = 'flex';
    }

    function run() {
        ctx.fillStyle = "#000b1a"; ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        if (active && started) {
            cat.v += 0.55; cat.y += cat.v; dist -= 0.7;
            monster.y += (cat.y - monster.y) * 0.05;
            monster.x = Math.min(cat.x - 160, monster.x + 0.4);

            if (barriers.length === 0 || barriers[barriers.length - 1].x < canvas.width - 400) {
                let h = Math.random() * (canvas.height - 350) + 100;
                barriers.push({ x: canvas.width, y: h, g: 300 });
                snacks.push({ x: canvas.width + 150, y: h + 150 });
            }

            barriers.forEach((b, i) => {
                b.x -= (6 + level*0.3);
                ctx.fillStyle = colors[level % 10];
                ctx.fillRect(b.x, 0, 80, b.y);
                ctx.fillRect(b.x, b.y + b.g, 80, canvas.height);
                // Ø§ØµØ·Ø¯Ø§Ù…
                if (cat.x + 60 > b.x && cat.x < b.x + 80 && (cat.y < b.y || cat.y + 40 > b.y + b.g)) fail();
                if (b.x < -100) barriers.splice(i, 1);
            });

            snacks.forEach((s, i) => {
                s.x -= (6 + level*0.3);
                drawFish(s.x, s.y);
                if (Math.hypot(cat.x + 35 - s.x, cat.y + 35 - s.y) < 55) {
                    fishTotal += 100; snacks.splice(i, 1);
                    document.getElementById('fCount').innerText = fishTotal;
                }
            });

            if (cat.y > canvas.height || cat.y < -100 || cat.x < monster.x + 110) fail();
            if (dist <= 0) win();

            document.getElementById('bar-fill').style.width = (1 - dist / 1000) * 100 + "%";
            document.getElementById('dCount').innerText = Math.max(0, Math.floor(dist));
        }

        drawBoss(monster.x, monster.y);
        drawHimalayan(cat.x, cat.y);

        requestAnimationFrame(run);
    }

    const input = () => { if (active) { started = true; cat.v = -10; } };
    window.addEventListener('mousedown', input);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); input(); }, { passive: false });

    run();
</script>
</body>
</html>