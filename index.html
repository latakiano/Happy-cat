<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Himalayan Cat 20 Stages</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: sans-serif; touch-action: none; }
        #ui { position: absolute; top: 10px; width: 100%; text-align: center; color: #fff; z-index: 10; pointer-events: none; }
        .bar { width: 70%; height: 12px; background: #333; margin: 10px auto; border-radius: 10px; border: 1px solid #fff; overflow: hidden; }
        #fill { width: 0%; height: 100%; background: #0f0; transition: 0.3s; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; color: #fff; z-index: 100; text-align: center; }
        button { padding: 15px 45px; font-size: 24px; cursor: pointer; border-radius: 30px; background: #27ae60; color: #fff; border: none; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

<div id="ui">
    <div id="lvlName" style="font-size: 22px; color: #f1c40f;">Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨</div>
    <div class="bar"><div id="fill"></div></div>
    <div style="font-size: 18px;">ğŸŸ <span id="score">0</span> | ğŸ <span id="dist">1000</span>m</div>
</div>

<div id="overlay">
    <h1 id="msg">Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ù‚Ø·Ø© Ø±Ù‡Ù ğŸ¾</h1>
    <p>Ø§Ø¶ØºØ· Ù„Ù„Ù‚ÙØ² ÙˆØ§Ù„Ù‡Ø±ÙˆØ¨ Ù…Ù† Ø§Ù„ÙˆØ­ÙˆØ´!</p>
    <button onclick="reset()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„Ù‡Ø±ÙˆØ¨ ğŸš€</button>
</div>

<canvas id="c"></canvas>

<script>
    const cvs = document.getElementById('c');
    const ctx = cvs.getContext('2d');

    // 20 Ù…Ø±Ø­Ù„Ø© ÙƒØ§Ù…Ù„Ø© (Ø§Ù„ÙˆØ­ÙˆØ´ØŒ Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ Ø§Ù„Ø³Ø±Ø¹Ø©)
    const stages = [
        {n:"ØºØ§Ø¨Ø© Ø§Ù„Ø°Ø¦Ø§Ø¨", m:"ğŸº", c:"#f1c40f", s:6}, {n:"Ù…Ù‚Ø¨Ø±Ø© Ø§Ù„Ø£Ø´Ø¨Ø§Ø­", m:"ğŸ‘»", c:"#9b59b6", s:7},
        {n:"Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù†Ø³ÙˆØ±", m:"ğŸ¦…", c:"#3498db", s:8}, {n:"ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø£ÙØ§Ø¹ÙŠ", m:"ğŸ", c:"#e67e22", s:9},
        {n:"Ù†Ù‡Ø± Ø§Ù„ØªÙ…Ø§Ø³ÙŠØ­", m:"ğŸŠ", c:"#1abc9c", s:10}, {n:"Ø¹Ø±ÙŠÙ† Ø§Ù„Ø£Ø³Ø¯", m:"ğŸ¦", c:"#e74c3c", s:11},
        {n:"ÙƒÙ‡Ù Ø§Ù„ØªÙ†ÙŠÙ†", m:"ğŸ‰", c:"#ff0000", s:12}, {n:"Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¬Ù„ÙŠØ¯", m:"ğŸ»", c:"#00d4ff", s:13},
        {n:"Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø¹Ø¬ÙŠØ¨", m:"ğŸ‘½", c:"#00ffcc", s:14}, {n:"Ø¨Ø±Ø¬ Ø§Ù„Ø®ÙØ§Ø´", m:"ğŸ¦‡", c:"#666", s:15},
        {n:"Ø£Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ±", m:"ğŸ¯", c:"#ff9900", s:16}, {n:"Ø¬Ø²ÙŠØ±Ø© Ø§Ù„ØºÙˆØ±ÙŠÙ„Ø§", m:"ğŸ¦", c:"#2ecc71", s:17},
        {n:"Ù‚ØµØ± Ø§Ù„Ù‡ÙŠØ§ÙƒÙ„", m:"ğŸ’€", c:"#ecf0f1", s:18}, {n:"Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø§Ø±", m:"ğŸ¦ˆ", c:"#2980b9", s:19},
        {n:"Ø¹Ø´ Ø§Ù„Ø¹Ù†Ø§ÙƒØ¨", m:"ğŸ•·ï¸", c:"#c0392b", s:20}, {n:"Ù…Ø³ØªÙ†Ù‚Ø¹ Ø§Ù„ÙˆØ­Ù„", m:"ğŸ§Ÿ", c:"#d4ac0d", s:21},
        {n:"Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§Øª", m:"ğŸ«", c:"#f39c12", s:22}, {n:"Ø¹Ø§Ù„Ù… Ø§Ù„Ø³Ø­Ø±", m:"ğŸ§™", c:"#8e44ad", s:23},
        {n:"Ù…ØµÙ†Ø¹ Ø§Ù„Ø±ÙˆØ¨ÙˆØªØ§Øª", m:"ğŸ¤–", c:"#bdc3c7", s:24}, {n:"Ø§Ù„Ù…Ø¹Ø±ÙƒØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©", m:"ğŸ‘¹", c:"#ffffff", s:26}
    ];

    let cur = 0, score = 0, dist = 1000, active = false, started = false;
    let p = {x: 100, y: 0, v: 0}, m = {x: -100, y: 0}, obs = [], fish = [];

    function resize() { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    function reset() {
        document.getElementById('overlay').style.display = 'none';
        dist = 1000; p.y = cvs.height/2; p.v = 0; m.x = -100;
        obs = []; fish = []; active = true; started = false;
        document.getElementById('lvlName').innerText = `Ø§Ù„Ù…Ø±Ø­Ù„Ø© ${cur+1}: ${stages[cur].n}`;
    }

    function die() {
        active = false;
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('msg').innerText = "Ø£Ù…Ø³Ùƒ Ø¨Ùƒ " + stages[cur].m;
    }

    function update() {
        if (!active || !started) return;
        let s = stages[cur];
        p.v += 0.5; p.y += p.v; // Ø¬Ø§Ø°Ø¨ÙŠØ©
        dist -= s.s / 10;
        m.y += (p.y - m.y) * 0.06; m.x = Math.min(p.x - 120, m.x + 0.4);

        if (dist <= 0) {
            active = false; cur++;
            if (cur >= 20) { cur = 0; document.getElementById('msg').innerText = "ğŸ† Ø£Ù†Øª Ø¨Ø·Ù„ Ø®Ø§Ø±Ù‚! ğŸ†"; }
            else { document.getElementById('msg').innerText = "ğŸ  ÙˆØµÙ„Øª Ù„Ù„ÙƒÙˆØ® Ø¨Ø£Ù…Ø§Ù†!"; }
            document.getElementById('overlay').style.display = 'flex';
        }

        if (Math.random() < 0.02) {
            let g = Math.random() * (cvs.height - 300) + 100;
            obs.push({x: cvs.width, y: g, w: 50, h: 280});
            fish.push({x: cvs.width + 50, y: g + 140});
        }

        obs.forEach((o, i) => {
            o.x -= s.s;
            if (p.x+30 > o.x && p.x < o.x+o.w && (p.y < o.y || p.y+40 > o.y+o.h)) die();
            if (o.x < -100) obs.splice(i, 1);
        });

        fish.forEach((f, i) => {
            f.x -= s.s;
            if (Math.hypot(p.x-f.x, p.y-f.y) < 40) { score += 100; fish.splice(i, 1); }
        });

        if (p.y > cvs.height || p.y < -50 || p.x < m.x + 60) die();
        document.getElementById('fill').style.width = (1 - dist/1000)*100 + "%";
        document.getElementById('dist').innerText = Math.max(0, Math.floor(dist));
        document.getElementById('score').innerText = score;
    }

    function draw() {
        ctx.fillStyle = "#000"; ctx.fillRect(0, 0, cvs.width, cvs.height);
        let s = stages[cur];
        
        ctx.fillStyle = s.c;
        obs.forEach(o => { ctx.fillRect(o.x, 0, o.w, o.y); ctx.fillRect(o.x, o.y+o.h, o.w, cvs.height); });
        
        ctx.font = "30px Arial";
        fish.forEach(f => ctx.fillText("ğŸ ", f.x, f.y));
        
        ctx.font = "60px Arial"; // Ø§Ù„ÙˆØ­Ø´
        ctx.save(); ctx.translate(m.x+60, m.y+50); ctx.scale(-1, 1); ctx.fillText(s.m, 0, 0); ctx.restore();
        
        ctx.font = "50px Arial"; // Ø§Ù„Ù‚Ø·Ø©
        ctx.fillText("ğŸ±", p.x, p.y+40);

        update(); requestAnimationFrame(draw);
    }

    function jump() { if(active) { started = true; p.v = -9; } }
    window.addEventListener('mousedown', jump);
    window.addEventListener('touchstart', (e) => { e.preventDefault(); jump(); }, {passive: false});
    draw();
</script>
</body>
</html>